# æ— äººæœºç½‘é¡µæ§åˆ¶ç³»ç»Ÿ - å¯åŠ¨æŒ‡å—

## ğŸ“¦ å®‰è£…æ­¥éª¤

### 1. å®‰è£… Node.js
ç¡®ä¿å·²å®‰è£… Node.js (æ¨è v16 æˆ–æ›´é«˜ç‰ˆæœ¬)
- ä¸‹è½½: https://nodejs.org/

### 2. å®‰è£…é¡¹ç›®ä¾èµ–

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd drone-web-control

# å®‰è£…åç«¯ä¾èµ–
npm install

# å®‰è£…å‰ç«¯ä¾èµ–
cd client
npm install
cd ..
```

### 3. å¤åˆ¶ Protobuf æ–‡ä»¶

Protobuf æ–‡ä»¶å·²ç»ä» `test-mosquitto-protobuff/protojs/` å¤åˆ¶åˆ° `proto/` ç›®å½•

éªŒè¯æ–‡ä»¶ï¼š
```bash
ls proto/
```

åº”è¯¥çœ‹åˆ°ä»¥ä¸‹æ–‡ä»¶ï¼š
- common.proto
- pointcloud.proto
- drone.proto
- mission.proto
- image.proto
- control.proto
- camera.proto
- addressbook.proto

### 4. éªŒè¯ Protobuf é…ç½®

```bash
npm run proto
```

å¦‚æœçœ‹åˆ° "âœ… Protobuf ç¼–è¯‘æˆåŠŸ!" åˆ™é…ç½®æ­£ç¡®ã€‚

## ğŸš€ å¯åŠ¨æœåŠ¡

### æ–¹å¼ä¸€ï¼šåŒæ—¶å¯åŠ¨å‰åç«¯ï¼ˆæ¨èï¼‰

```bash
npm start
```

è¿™ä¼šåŒæ—¶å¯åŠ¨ï¼š
- åç«¯æœåŠ¡å™¨: http://localhost:3001
- å‰ç«¯ç•Œé¢: http://localhost:3000

### æ–¹å¼äºŒï¼šåˆ†åˆ«å¯åŠ¨

**ç»ˆç«¯ 1 - å¯åŠ¨åç«¯:**
```bash
npm run server
```

**ç»ˆç«¯ 2 - å¯åŠ¨å‰ç«¯:**
```bash
npm run client
```

## ğŸ”— è¿æ¥æ— äººæœº

### æ–¹æ³• 1: è¿æ¥æ— äººæœºçƒ­ç‚¹
1. Windows è¿æ¥åˆ°æ— äººæœº WiFi çƒ­ç‚¹
2. æ— äººæœºé»˜è®¤ IP: `10.42.0.1`
3. é…ç½®å·²è®¾ç½®ä¸ºè¯¥ IPï¼Œæ— éœ€ä¿®æ”¹

### æ–¹æ³• 2: ä¿®æ”¹é…ç½®è¿æ¥å…¶ä»– IP
ç¼–è¾‘ `server/config.js`:
```javascript
mqtt: {
  broker: 'ä½ çš„æ— äººæœºIP',  // ä¿®æ”¹è¿™é‡Œ
  port: 1883
}
```

## ğŸ“Š åŠŸèƒ½è¯´æ˜

### å®æ—¶æ•°æ®æ˜¾ç¤º
- â˜ï¸ **ç‚¹äº‘è§†å›¾**: 3D å®æ—¶æ¸²æŸ“ç‚¹äº‘æ•°æ®
- ğŸ“ **ä½å§¿æ˜¾ç¤º**: å®æ—¶ä½ç½®ã€é€Ÿåº¦ã€å§¿æ€
- ğŸ’“ **å¿ƒè·³ç›‘æ§**: é£è¡Œæ¨¡å¼ã€ä¼ æ„Ÿå™¨çŠ¶æ€
- ğŸ“Š **æ•°æ®ç»Ÿè®¡**: æ¥æ”¶æ•°æ®é‡ç»Ÿè®¡

### æ§åˆ¶åŠŸèƒ½
- ğŸš **èµ·é£/é™è½**: ä¸€é”®æ§åˆ¶
- ğŸ“‹ **èˆªç‚¹ä»»åŠ¡**:
  - è¾“å…¥ç›®æ ‡åæ ‡ (X, Y, Z)
  - è‡ªåŠ¨è§„åˆ’ï¼šèµ·é£ â†’ èˆªç‚¹ â†’ è¿”èˆª â†’ é™è½
- ğŸ® **ä»»åŠ¡æ§åˆ¶**: å¼€å§‹/æš‚åœ/æ¢å¤/åœæ­¢

## ğŸ› ï¸ æ•…éšœæ’æŸ¥

### é—®é¢˜1: æ— æ³•è¿æ¥ MQTT
**ç—‡çŠ¶**: æ§åˆ¶å°æ˜¾ç¤º "MQTT è¿æ¥é”™è¯¯"

**è§£å†³**:
1. ç¡®è®¤å·²è¿æ¥æ— äººæœº WiFi
2. æµ‹è¯•è¿æ¥: `ping 10.42.0.1`
3. æ£€æŸ¥æ— äººæœºæ˜¯å¦å·²å¼€æœº

### é—®é¢˜2: Protobuf è§£æå¤±è´¥
**ç—‡çŠ¶**: æ”¶åˆ°æ•°æ®ä½†æ— æ³•è§£æ

**è§£å†³**:
```bash
npm run proto
```
ç¡®ä¿æ‰€æœ‰ .proto æ–‡ä»¶æ­£ç¡®åŠ è½½

### é—®é¢˜3: å‰ç«¯æ— æ³•è¿æ¥åç«¯
**ç—‡çŠ¶**: æµè§ˆå™¨æ˜¾ç¤º "æœªè¿æ¥"

**è§£å†³**:
1. ç¡®è®¤åç«¯æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ (ç«¯å£ 3001)
2. æ£€æŸ¥é˜²ç«å¢™æ˜¯å¦é˜»æ­¢
3. æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹ WebSocket é”™è¯¯

### é—®é¢˜4: ç‚¹äº‘ä¸æ˜¾ç¤º
**ç—‡çŠ¶**: 3D è§†å›¾æ˜¯é»‘å±

**è§£å†³**:
1. ç¡®è®¤æ— äººæœºæ­£åœ¨å‘å¸ƒç‚¹äº‘è¯é¢˜
2. æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹æ˜¯å¦æ”¶åˆ°æ•°æ®
3. æ£€æŸ¥ç‚¹äº‘æ•°æ®é‡ï¼ˆå³ä¸Šè§’ç»Ÿè®¡ï¼‰

## ğŸ“¡ è®¢é˜…çš„è¯é¢˜

ç³»ç»Ÿè‡ªåŠ¨è®¢é˜…ä»¥ä¸‹è¯é¢˜ï¼š
- `/daf/pointcloud` - æ·±åº¦ç‚¹äº‘
- `/daf/pointcloud_rgb` - RGBç‚¹äº‘
- `/daf/local/odometry` - ä½å§¿é‡Œç¨‹è®¡
- `/daf/heartbeat` - å¿ƒè·³åŒ…
- `/daf/camera` - æ‘„åƒå¤´å›¾åƒ
- `/daf/mission/receipt` - ä»»åŠ¡å›æ‰§

## ğŸ“¤ å‘å¸ƒçš„è¯é¢˜

å¯é€šè¿‡ç•Œé¢å‘å¸ƒï¼š
- `/daf/command` - èµ·é£/é™è½
- `/daf/mission` - èˆªç‚¹ä»»åŠ¡
- `/daf/mission/execution` - ä»»åŠ¡æ‰§è¡Œæ§åˆ¶

## ğŸ’» ç³»ç»Ÿè¦æ±‚

- Windows 10/11
- Node.js 16+
- å†…å­˜: è‡³å°‘ 4GB
- æµè§ˆå™¨: Chrome/Edge (æœ€æ–°ç‰ˆ)

## ğŸ”§ å¼€å‘è°ƒè¯•

### æŸ¥çœ‹åç«¯æ—¥å¿—
åç«¯ä¼šå®æ—¶æ‰“å°ï¼š
- MQTT è¿æ¥çŠ¶æ€
- æ”¶åˆ°çš„æ¶ˆæ¯ç±»å‹
- Protobuf è§£æç»“æœ

### æŸ¥çœ‹å‰ç«¯æ—¥å¿—
æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· (F12) â†’ Console

### ä¿®æ”¹ä»£ç å
- åç«¯: é‡å¯ `npm run server`
- å‰ç«¯: è‡ªåŠ¨çƒ­é‡è½½

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œæ£€æŸ¥ï¼š
1. æ‰€æœ‰ä¾èµ–æ˜¯å¦æ­£ç¡®å®‰è£…
2. Node.js ç‰ˆæœ¬æ˜¯å¦ >= 16
3. proto æ–‡ä»¶æ˜¯å¦åœ¨ proto/ ç›®å½•
4. æ— äººæœºç½‘ç»œæ˜¯å¦è¿æ¥

## ğŸ¯ å¿«é€Ÿæµ‹è¯•ï¼ˆä¸è¿æ— äººæœºï¼‰

å¦‚æœæ²¡æœ‰æ— äººæœºï¼Œå¯ä»¥æœ¬åœ°æµ‹è¯•é€šä¿¡ï¼š

**ç»ˆç«¯1 - å¯åŠ¨ Mosquitto broker:**
```bash
cd test-mosquitto-protobuff/build/src/mosquitto
./mosquitto
```

**ç»ˆç«¯2 - å¯åŠ¨ web ç³»ç»Ÿåç«¯:**
```bash
cd drone-web-control
# ä¿®æ”¹ server/config.js ä¸­ broker: 'localhost'
npm run server
```

**ç»ˆç«¯3 - å¯åŠ¨ web ç³»ç»Ÿå‰ç«¯:**
```bash
cd drone-web-control
npm run client
```

**ç»ˆç«¯4 - è¿è¡Œæµ‹è¯•å‘å¸ƒç¨‹åº:**
```bash
cd test-mosquitto-protobuff/build/src/example
# ä¿®æ”¹ daf_pub.cc ä¸­ IP ä¸º localhost
./daf_pub
```

è¿™æ ·å°±å¯ä»¥åœ¨æ²¡æœ‰æ— äººæœºçš„æƒ…å†µä¸‹æµ‹è¯•å®Œæ•´åŠŸèƒ½ï¼
