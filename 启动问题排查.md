# å¯åŠ¨é—®é¢˜æ’æŸ¥æŒ‡å—

## é—®é¢˜ç°è±¡ï¼šåŒå‡»batæ–‡ä»¶åç»ˆç«¯é—ªçƒï¼Œæ— æ³•å¯åŠ¨

### åŸå› åˆ†æ

ç»ˆç«¯é—ªçƒé€šå¸¸æ˜¯å› ä¸ºï¼š
1. **å¯åŠ¨å‘½ä»¤æ‰§è¡Œå¤±è´¥** - å‡ºç°é”™è¯¯åçª—å£ç«‹å³å…³é—­
2. **ç«¯å£è¢«å ç”¨** - å…¶ä»–è¿›ç¨‹å ç”¨äº†3000æˆ–5000ç«¯å£
3. **ä¾èµ–ç¼ºå¤±** - clientæˆ–serverçš„node_modulesæœªæ­£ç¡®å®‰è£…
4. **Nodeè¿›ç¨‹æœªæ¸…ç†** - ä¹‹å‰çš„è¿›ç¨‹æ²¡æœ‰æ­£ç¡®å…³é—­

---

## è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šä½¿ç”¨è°ƒè¯•ç‰ˆbatæ–‡ä»¶ï¼ˆæ¨èï¼‰

æˆ‘å·²ç»åˆ›å»ºäº† `start-real-debug.bat`ï¼Œå®ƒä¼šï¼š
- âœ… è¯¦ç»†æ£€æŸ¥æ‰€æœ‰ä¾èµ–
- âœ… æ˜¾ç¤ºNode.jså’Œnpmç‰ˆæœ¬
- âœ… å‡ºé”™æ—¶ä¸ä¼šå…³é—­çª—å£
- âœ… æ˜¾ç¤ºè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯

**ä½¿ç”¨æ–¹æ³•**ï¼š
```batch
åŒå‡»è¿è¡Œï¼šstart-real-debug.bat
```

### æ–¹æ¡ˆ2ï¼šæ¸…ç†è¿›ç¨‹åé‡å¯

å¦‚æœå‡ºç°ç«¯å£å ç”¨é—®é¢˜ï¼š

```batch
1. è¿è¡Œ: restart-clean.bat
2. ç­‰å¾…æ‰€æœ‰nodeè¿›ç¨‹è¢«æ¸…ç†
3. é‡æ–°è¿è¡Œ: start-real.bat æˆ– start-simulator.bat
```

### æ–¹æ¡ˆ3ï¼šæ‰‹åŠ¨è¯Šæ–­

#### æ­¥éª¤1ï¼šæ£€æŸ¥ç«¯å£å ç”¨

æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼ˆç®¡ç†å‘˜æ¨¡å¼ï¼‰ï¼š

```batch
# æ£€æŸ¥3000ç«¯å£ï¼ˆåç«¯æœåŠ¡å™¨ï¼‰
netstat -ano | findstr :3000

# æ£€æŸ¥5000ç«¯å£ï¼ˆå‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼‰
netstat -ano | findstr :5000
```

å¦‚æœç«¯å£è¢«å ç”¨ï¼Œè®°ä¸‹PIDå¹¶å…³é—­ï¼š
```batch
taskkill /F /PID <è¿›ç¨‹ID>
```

#### æ­¥éª¤2ï¼šæ£€æŸ¥Nodeè¿›ç¨‹

```batch
# æŸ¥çœ‹æ‰€æœ‰nodeè¿›ç¨‹
tasklist | findstr node

# å¦‚æœæœ‰å¤šä¸ªnodeè¿›ç¨‹ï¼Œå…¨éƒ¨å…³é—­
taskkill /F /IM node.exe
```

#### æ­¥éª¤3ï¼šæ£€æŸ¥ä¾èµ–å®‰è£…

```batch
cd c:\Users\23054\Desktop\å®¤å†…æ— äººæœº\drone-web-control

# æ£€æŸ¥æ ¹ç›®å½•ä¾èµ–
dir node_modules

# æ£€æŸ¥clientä¾èµ–
dir client\node_modules
```

å¦‚æœç¼ºå°‘ä¾èµ–ï¼š
```batch
# æ ¹ç›®å½•
npm install

# clientç›®å½•
cd client
npm install
cd ..
```

#### æ­¥éª¤4ï¼šæ‰‹åŠ¨å¯åŠ¨ï¼ˆæŸ¥çœ‹è¯¦ç»†é”™è¯¯ï¼‰

```batch
cd c:\Users\23054\Desktop\å®¤å†…æ— äººæœº\drone-web-control

# è®¾ç½®ç¯å¢ƒå˜é‡
set DRONE_MODE=real

# æ‰‹åŠ¨å¯åŠ¨
npm start
```

è¿™æ ·å¯ä»¥çœ‹åˆ°è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ã€‚

---

## å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ³•

### é”™è¯¯1ï¼šç«¯å£å·²è¢«å ç”¨

**é”™è¯¯ä¿¡æ¯**ï¼š
```
Error: listen EADDRINUSE: address already in use :::3000
```

**è§£å†³æ–¹æ³•**ï¼š
```batch
# æ‰¾åˆ°å ç”¨3000ç«¯å£çš„è¿›ç¨‹
netstat -ano | findstr :3000

# å…³é—­è¯¥è¿›ç¨‹
taskkill /F /PID <è¿›ç¨‹ID>

# æˆ–è€…ç›´æ¥è¿è¡Œ
restart-clean.bat
```

### é”™è¯¯2ï¼šæ‰¾ä¸åˆ°æ¨¡å—

**é”™è¯¯ä¿¡æ¯**ï¼š
```
Error: Cannot find module 'concurrently'
æˆ–
Error: Cannot find module 'react'
```

**è§£å†³æ–¹æ³•**ï¼š
```batch
# é‡æ–°å®‰è£…æ‰€æœ‰ä¾èµ–
npm run install-all
```

### é”™è¯¯3ï¼šæƒé™ä¸è¶³

**é”™è¯¯ä¿¡æ¯**ï¼š
```
Error: EPERM: operation not permitted
```

**è§£å†³æ–¹æ³•**ï¼š
- ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå‘½ä»¤æç¤ºç¬¦
- å³é”®batæ–‡ä»¶ â†’ ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ

### é”™è¯¯4ï¼šMQTTè¿æ¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š
```
MQTTè¿æ¥å¤±è´¥
æˆ–
Connection refused: Not authorized
```

**è§£å†³æ–¹æ³•**ï¼š
1. æ£€æŸ¥MQTT brokeråœ°å€æ˜¯å¦æ­£ç¡®
2. æ£€æŸ¥ç½‘ç»œè¿æ¥
3. å¦‚æœæ˜¯å®æœºæ¨¡å¼ï¼Œç¡®ä¿æ— äººæœºå·²å¼€æœºå¹¶è¿æ¥åˆ°åŒä¸€ç½‘ç»œ

---

## åˆ†æ­¥æµ‹è¯•æ–¹æ³•

### æµ‹è¯•1ï¼šå•ç‹¬å¯åŠ¨åç«¯

```batch
cd c:\Users\23054\Desktop\å®¤å†…æ— äººæœº\drone-web-control
node server/index.js
```

**é¢„æœŸç»“æœ**ï¼š
```
ğŸš€ æœåŠ¡å™¨å¯åŠ¨åœ¨ http://localhost:3000
ğŸ“¡ WebSocket æœåŠ¡å™¨è¿è¡Œåœ¨ ws://localhost:3000
ğŸ”Œ æ­£åœ¨è¿æ¥ MQTT Broker: mqtt://localhost:1883
âœ… MQTT å·²è¿æ¥
```

### æµ‹è¯•2ï¼šå•ç‹¬å¯åŠ¨å‰ç«¯

æ‰“å¼€æ–°çš„å‘½ä»¤æç¤ºç¬¦ï¼š
```batch
cd c:\Users\23054\Desktop\å®¤å†…æ— äººæœº\drone-web-control\client
npm start
```

**é¢„æœŸç»“æœ**ï¼š
- æµè§ˆå™¨è‡ªåŠ¨æ‰“å¼€ http://localhost:5000
- çœ‹åˆ°æ— äººæœºæ§åˆ¶ç•Œé¢

### æµ‹è¯•3ï¼šä½¿ç”¨concurrentlyåŒæ—¶å¯åŠ¨

```batch
cd c:\Users\23054\Desktop\å®¤å†…æ— äººæœº\drone-web-control
npm start
```

**é¢„æœŸç»“æœ**ï¼š
- åŒæ—¶çœ‹åˆ°åç«¯å’Œå‰ç«¯çš„å¯åŠ¨ä¿¡æ¯
- æµè§ˆå™¨è‡ªåŠ¨æ‰“å¼€

---

## æ–‡ä»¶æ¸…å•

### å¯åŠ¨è„šæœ¬

| æ–‡ä»¶å | ç”¨é€” | è¯´æ˜ |
|--------|------|------|
| `start-real.bat` | å®æœºæ¨¡å¼å¯åŠ¨ | åªå¯åŠ¨æœåŠ¡å™¨ï¼Œè¿æ¥çœŸå®æ— äººæœº |
| `start-simulator.bat` | æ¨¡æ‹Ÿå™¨æ¨¡å¼å¯åŠ¨ | å¯åŠ¨æœåŠ¡å™¨+ZZXLæ¨¡æ‹Ÿå™¨ |
| `start-real-debug.bat` | è°ƒè¯•ç‰ˆå®æœºå¯åŠ¨ | æ˜¾ç¤ºè¯¦ç»†è¯Šæ–­ä¿¡æ¯ï¼Œ**æ¨èç”¨äºæ’æŸ¥é—®é¢˜** |
| `restart-clean.bat` | æ¸…ç†é‡å¯ | æ¸…ç†æ‰€æœ‰nodeè¿›ç¨‹åé‡å¯ |

### ä½¿ç”¨å»ºè®®

1. **é¦–æ¬¡å¯åŠ¨**ï¼šä½¿ç”¨ `start-real-debug.bat` æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
2. **æ—¥å¸¸ä½¿ç”¨**ï¼šä½¿ç”¨ `start-real.bat` æˆ– `start-simulator.bat`
3. **å‡ºç°é—®é¢˜**ï¼šä½¿ç”¨ `restart-clean.bat` æ¸…ç†åé‡è¯•
4. **æ·±åº¦è°ƒè¯•**ï¼šæ‰‹åŠ¨é€æ­¥å¯åŠ¨ï¼ŒæŸ¥çœ‹å…·ä½“é”™è¯¯

---

## æ”¹è¿›è¯´æ˜ï¼ˆv3.2.1.2ï¼‰

### å·²ä¿®å¤çš„é—®é¢˜

1. âœ… **ç»ˆç«¯é—ªçƒ** - æ·»åŠ äº†é”™è¯¯æ•è·å’Œpauseå‘½ä»¤
2. âœ… **é”™è¯¯ä¿¡æ¯çœ‹ä¸åˆ°** - æ”¹è¿›äº†é”™è¯¯æ˜¾ç¤ºé€»è¾‘
3. âœ… **ç¼ºå°‘è¯Šæ–­ä¿¡æ¯** - åˆ›å»ºäº†debugç‰ˆæœ¬batæ–‡ä»¶

### æ–°å¢æ–‡ä»¶

- `start-real-debug.bat` - è¯¦ç»†è¯Šæ–­ç‰ˆæœ¬
- `å¯åŠ¨é—®é¢˜æ’æŸ¥.md` - æœ¬æ–‡æ¡£

### ä¿®æ”¹çš„æ–‡ä»¶

- `start-real.bat` - æ·»åŠ äº†é”™è¯¯ç æ£€æµ‹å’Œæç¤º
- `start-simulator.bat` - æ·»åŠ äº†æ•…éšœæ’æŸ¥æç¤º

---

## è”ç³»å’Œåé¦ˆ

å¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½æ— æ³•è§£å†³é—®é¢˜ï¼Œè¯·ï¼š

1. è¿è¡Œ `start-real-debug.bat`
2. æˆªå›¾å®Œæ•´çš„é”™è¯¯ä¿¡æ¯
3. è®°å½•é—®é¢˜å¤ç°æ­¥éª¤
4. æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š
   - Node.jsç‰ˆæœ¬ (`node --version`)
   - npmç‰ˆæœ¬ (`npm --version`)
   - æ“ä½œç³»ç»Ÿç‰ˆæœ¬
   - æ˜¯å¦èƒ½å¤Ÿè®¿é—® localhost:3000 å’Œ localhost:5000
